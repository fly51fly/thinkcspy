<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>A Programming Example &#8212; How to Think like a Computer Scientist: Interactive Edition</title>
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.0.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/video.css" type="text/css" />
    <link rel="stylesheet" href="../_static/clickable.css" type="text/css" />
    <link rel="stylesheet" href="../_static/codemirror.css" type="text/css" />
    <link rel="stylesheet" href="../_static/activecode.css" type="text/css" />
    <link rel="stylesheet" href="../_static/datafile.css" type="text/css" />
    <link rel="stylesheet" href="../_static/parsons.css" type="text/css" />
    <link rel="stylesheet" href="../_static/lib/prettify.css" type="text/css" />
    <link rel="stylesheet" href="../_static/tabbedstuff.css" type="text/css" />
    <link rel="stylesheet" href="../_static/dragndrop.css" type="text/css" />
    <link rel="stylesheet" href="../_static/showEval.css" type="text/css" />
    <link rel="stylesheet" href="../_static/fitb.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pytutor.css" type="text/css" />
    <link rel="stylesheet" href="../_static/modal-basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/poll.css" type="text/css" />
    <link rel="stylesheet" href="../_static/jquery-ui-1.10.3.custom.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/user-highlights.css" type="text/css" />
    <link rel="stylesheet" href="../_static/runestone-custom-sphinx-bootstrap.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/runestonebase.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/shortanswer.js"></script>
    <script type="text/javascript" src="../_static/timed_shortanswer.js"></script>
    <script type="text/javascript" src="../_static/clickable.js"></script>
    <script type="text/javascript" src="../_static/timedclickable.js"></script>
    <script type="text/javascript" src="../_static/jquery.highlight.js"></script>
    <script type="text/javascript" src="../_static/bookfuncs.js"></script>
    <script type="text/javascript" src="../_static/codemirror.js"></script>
    <script type="text/javascript" src="../_static/xml.js"></script>
    <script type="text/javascript" src="../_static/css.js"></script>
    <script type="text/javascript" src="../_static/htmlmixed.js"></script>
    <script type="text/javascript" src="../_static/python.js"></script>
    <script type="text/javascript" src="../_static/javascript.js"></script>
    <script type="text/javascript" src="../_static/activecode.js"></script>
    <script type="text/javascript" src="../_static/skulpt.min.js"></script>
    <script type="text/javascript" src="../_static/skulpt-stdlib.js"></script>
    <script type="text/javascript" src="../_static/clike.js"></script>
    <script type="text/javascript" src="../_static/timed_activecode.js"></script>
    <script type="text/javascript" src="../_static/skulpt.min.js"></script>
    <script type="text/javascript" src="../_static/skulpt-stdlib.js"></script>
    <script type="text/javascript" src="../_static/datafile.js"></script>
    <script type="text/javascript" src="../_static/lib/prettify.js"></script>
    <script type="text/javascript" src="../_static/lib/hammer.min.js"></script>
    <script type="text/javascript" src="../_static/parsons.js"></script>
    <script type="text/javascript" src="../_static/timedparsons.js"></script>
    <script type="text/javascript" src="../_static/tabbedstuff.js"></script>
    <script type="text/javascript" src="../_static/reveal.js"></script>
    <script type="text/javascript" src="../_static/dragndrop.js"></script>
    <script type="text/javascript" src="../_static/timeddnd.js"></script>
    <script type="text/javascript" src="../_static/showEval.js"></script>
    <script type="text/javascript" src="../_static/animationbase.js"></script>
    <script type="text/javascript" src="../_static/fitb.js"></script>
    <script type="text/javascript" src="../_static/timedfitb.js"></script>
    <script type="text/javascript" src="../_static/d3.v2.min.js"></script>
    <script type="text/javascript" src="../_static/jquery.ba-bbq.min.js"></script>
    <script type="text/javascript" src="../_static/jquery.jsPlumb-1.3.10-all-min.js"></script>
    <script type="text/javascript" src="../_static/pytutor.js"></script>
    <script type="text/javascript" src="../_static/codelens.js"></script>
    <script type="text/javascript" src="../_static/mchoice.js"></script>
    <script type="text/javascript" src="../_static/timedmc.js"></script>
    <script type="text/javascript" src="../_static/timed.js"></script>
    <script type="text/javascript" src="../_static/poll.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/jquery-ui-1.10.3.custom.min.js"></script>
    <script type="text/javascript" src="../_static/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.0.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <script type="text/javascript" src="../_static/waypoints.min.js"></script>
    <script type="text/javascript" src="../_static/user-highlights.js"></script>
    <script type="text/javascript" src="../_static/jquery.idle-timer.js"></script>
    <script type="text/javascript" src="../_static/processing-1.4.1.min.js"></script>
    <script type="text/javascript" src="../_static/jquery.hotkey.js"></script>
    <script type="text/javascript" src="../_static/jquery-migrate-1.2.1.min.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
<link rel="shortcut icon" href="/runestone/static/favicon.ico" type="image/ico" />

<script type="text/javascript">
  eBookConfig = {};
  eBookConfig.host = 'http://127.0.0.1:8000' ? 'http://127.0.0.1:8000' : 'http://127.0.0.1:8000';
  eBookConfig.app = eBookConfig.host+'/runestone';
  eBookConfig.ajaxURL = eBookConfig.app+'/ajax/';
  eBookConfig.course = 'thinkcspy';
  eBookConfig.logLevel = 10;
  eBookConfig.loginRequired = false;
  eBookConfig.build_info = "4.0.1";
  eBookConfig.isLoggedIn = false;
  eBookConfig.useRunestoneServices = true;
  eBookConfig.python3 = true;
  eBookConfig.basecourse = 'thinkcspy';
  eBookConfig.runestone_version = '3.0.5';
</script>
<style>
.navLink{
	display: block;
  position: static;
  font-size: 3rem;
}

@media (max-width: 600px) {
    /* Styling definitions for chevron function in bookfuncs.js */
	.navLink{
		display: block;
	}
}

#relations-next {
  float: right;
}

#relations-prev {
  float: left;
}

.navLink a {
	color: #999;
}
</style>

  </head>
  <body>



<div class="container" id="continue-reading"></div>

<div class="container" id="main-content">
  
  <div class="section" id="a-programming-example">
<h1>A Programming Example<a class="headerlink" href="#a-programming-example" title="Permalink to this headline">¶</a></h1>
<p>Let’s develop a non-trivial GUI program to demonstrate the material presented
in the previous lessons. We will develop a GUI Whack-a-mole
game where a user tries to click on “moles” as they randomly pop up out of
the “ground.”</p>
<p>This discussion will take you through an <em>incremental development</em> cycle
that creates a program in well-defined stages. While you might read a
finished computer program from “top to bottom,” that is not how it was
developed. For a typical GUI program development, you are encouraged to go
through these stages:</p>
<ol class="arabic simple">
<li>Using scratch paper, physically draw a rough sketch of your user interface.</li>
<li>Create the basic structure of your program and create the major frames that
will hold the widgets needed for your program’s interface. Give the frames
an initial size and color so that you can visually see them, given that
there are no widgets inside of them to determine their size.</li>
<li>Incrementally add all of the widgets you need for your program and size and
position them appropriately.</li>
<li>Create your callback functions, stub them out, and assign them to appropriate
events. Verify that the events are executing the correct functions.</li>
<li>Incrementally implement the functionality needed for each callback function.</li>
</ol>
<p>When you develop code using <em>incremental development</em> your program should
always be executable. You continually add a few lines of code and then test
them. If errors occur you almost always know were the errors came from!
They came from the lines of code you just added.</p>
<div class="section" id="a-whack-a-mole-game">
<h2>A Whack-a-mole Game<a class="headerlink" href="#a-whack-a-mole-game" title="Permalink to this headline">¶</a></h2>
<p>Step 1: Make sure you have a reasonable GUI design and implementation plan
before you start coding. Draw a sketch of your initial design on paper
and consider how a user will interact with your program.</p>
<div class="figure align-center" id="id1">
<img alt="../_images/Whack_a_mole_design.png" src="../_images/Whack_a_mole_design.png" />
<p class="caption"><span class="caption-text">Initial design of a Whack-a-mole game</span></p>
</div>
<p>Step 2: Create the basic structure of your interface using appropriate <code class="docutils literal"><span class="pre">frame</span></code>
widgets. You will need to give a size to the frames because they will contain
no widgets, which is how a frame typically gets its size. It is also suggested
that you give each frame a unique color so it is easy to see the area of the
window it covers. Here is a basic start for our whack-a-mole game (<a class="reference external" href="../_static/Programs/whack_a_mole_v1.py">whack_a_mole_v1.py</a>):</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">WhackAMole</span><span class="p">:</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">window</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Tk</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mole_frame</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">status_frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_frames</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">create_frames</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">mole_frame</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>
        <span class="n">mole_frame</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">status_frame</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="s1">&#39;green&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>
        <span class="n">status_frame</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">mole_frame</span><span class="p">,</span> <span class="n">status_frame</span>

<span class="c1"># Create the GUI program</span>
<span class="n">program</span> <span class="o">=</span> <span class="n">WhackAMole</span><span class="p">()</span>

<span class="c1"># Start the GUI event loop</span>
<span class="n">program</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>
</pre></div>
</div>
<p>Step 3: Incrementally add appropriate widgets to each frame. Don’t attempt
to add all the widgets at once. The initial design conceptualized the moles
as buttons, so a grid of buttons was added to the left frame, one button
for each mole. The exact size of the “mole field” needs to be determined at
a future time, so initialize a CONSTANT that can be used to easily change it
later.  (<a class="reference external" href="../_static/Programs/whack_a_mole_v2.py">whack_a_mole_v2.py</a>)</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">tkinter</span> <span class="kn">as</span> <span class="nn">tk</span>
<span class="kn">from</span> <span class="nn">tkinter</span> <span class="kn">import</span> <span class="n">PhotoImage</span>

<span class="k">class</span> <span class="nc">WhackAMole</span><span class="p">:</span>
    <span class="n">NUM_MOLES_ACROSS</span> <span class="o">=</span> <span class="mi">4</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">window</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Tk</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mole_frame</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">status_frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_frames</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mole_photo</span> <span class="o">=</span> <span class="n">PhotoImage</span><span class="p">(</span><span class="nb">file</span><span class="o">=</span><span class="s2">&quot;mole.png&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mole_buttons</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_moles</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">create_frames</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">mole_frame</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">)</span>
        <span class="n">mole_frame</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">status_frame</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="s1">&#39;green&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
        <span class="n">status_frame</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">E</span> <span class="o">+</span> <span class="n">tk</span><span class="o">.</span><span class="n">W</span> <span class="o">+</span> <span class="n">tk</span><span class="o">.</span><span class="n">N</span> <span class="o">+</span> <span class="n">tk</span><span class="o">.</span><span class="n">S</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">mole_frame</span><span class="p">,</span> <span class="n">status_frame</span>

    <span class="k">def</span> <span class="nf">create_moles</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Source of mole image: https://play.google.com/store/apps/details?id=genergame.molehammer</span>

        <span class="n">mole_buttons</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">WhackAMole</span><span class="o">.</span><span class="n">NUM_MOLES_ACROSS</span><span class="p">):</span>
            <span class="n">row_of_buttons</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">WhackAMole</span><span class="o">.</span><span class="n">NUM_MOLES_ACROSS</span><span class="p">):</span>
                <span class="n">mole_button</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mole_frame</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">mole_photo</span><span class="p">)</span>
                <span class="n">mole_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="n">r</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="n">c</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>

                <span class="n">row_of_buttons</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mole_button</span><span class="p">)</span>

            <span class="n">mole_buttons</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row_of_buttons</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">mole_buttons</span>

<span class="c1"># Create the GUI program</span>
<span class="n">program</span> <span class="o">=</span> <span class="n">WhackAMole</span><span class="p">()</span>

<span class="c1"># Start the GUI event loop</span>
<span class="n">program</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>
</pre></div>
</div>
<p>Continue to add appropriate widgets for the right frame. The final result is
shown below, but recognize that it was developed little by little.
(<a class="reference external" href="../_static/Programs/whack_a_mole_v3.py">whack_a_mole_v3.py</a>)</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">tkinter</span> <span class="kn">as</span> <span class="nn">tk</span>
<span class="kn">from</span> <span class="nn">tkinter</span> <span class="kn">import</span> <span class="n">PhotoImage</span>


<span class="k">class</span> <span class="nc">WhackAMole</span><span class="p">:</span>
    <span class="n">STATUS_BACKGROUND</span> <span class="o">=</span> <span class="s2">&quot;white&quot;</span>
    <span class="n">NUM_MOLES_ACROSS</span> <span class="o">=</span> <span class="mi">4</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">window</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Tk</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mole_frame</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">status_frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_frames</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mole_photo</span> <span class="o">=</span> <span class="n">PhotoImage</span><span class="p">(</span><span class="nb">file</span><span class="o">=</span><span class="s2">&quot;mole.png&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mole_buttons</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_moles</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">hit_counter</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">miss_counter</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_button</span> \
            <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_status_widgets</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">create_frames</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">mole_frame</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">)</span>
        <span class="n">mole_frame</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">status_frame</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="n">WhackAMole</span><span class="o">.</span><span class="n">STATUS_BACKGROUND</span><span class="p">)</span>
        <span class="n">status_frame</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">N</span> <span class="o">+</span> <span class="n">tk</span><span class="o">.</span><span class="n">S</span> <span class="o">+</span> <span class="n">tk</span><span class="o">.</span><span class="n">W</span> <span class="o">+</span> <span class="n">tk</span><span class="o">.</span><span class="n">W</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">mole_frame</span><span class="p">,</span> <span class="n">status_frame</span>

    <span class="k">def</span> <span class="nf">create_moles</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Source of mole image: https://play.google.com/store/apps/details?id=genergame.molehammer</span>

        <span class="n">mole_buttons</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">WhackAMole</span><span class="o">.</span><span class="n">NUM_MOLES_ACROSS</span><span class="p">):</span>
            <span class="n">row_of_buttons</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">WhackAMole</span><span class="o">.</span><span class="n">NUM_MOLES_ACROSS</span><span class="p">):</span>
                <span class="n">mole_button</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mole_frame</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">mole_photo</span><span class="p">)</span>
                <span class="n">mole_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="n">r</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="n">c</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>

                <span class="n">row_of_buttons</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mole_button</span><span class="p">)</span>

            <span class="n">mole_buttons</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row_of_buttons</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">mole_buttons</span>

    <span class="k">def</span> <span class="nf">create_status_widgets</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">spacer</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">status_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="n">WhackAMole</span><span class="o">.</span><span class="n">STATUS_BACKGROUND</span><span class="p">)</span>
        <span class="n">spacer</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

        <span class="n">hit_label</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">status_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Number of Hits&quot;</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="n">WhackAMole</span><span class="o">.</span><span class="n">STATUS_BACKGROUND</span><span class="p">)</span>
        <span class="n">hit_label</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

        <span class="n">hit_counter</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">status_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;0&quot;</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="n">WhackAMole</span><span class="o">.</span><span class="n">STATUS_BACKGROUND</span><span class="p">)</span>
        <span class="n">hit_counter</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

        <span class="n">spacer</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">status_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="n">WhackAMole</span><span class="o">.</span><span class="n">STATUS_BACKGROUND</span><span class="p">)</span>
        <span class="n">spacer</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

        <span class="n">miss_label</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">status_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Number of Misses&quot;</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="n">WhackAMole</span><span class="o">.</span><span class="n">STATUS_BACKGROUND</span><span class="p">)</span>
        <span class="n">miss_label</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

        <span class="n">miss_counter</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">status_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;0&quot;</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="n">WhackAMole</span><span class="o">.</span><span class="n">STATUS_BACKGROUND</span><span class="p">)</span>
        <span class="n">miss_counter</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

        <span class="n">spacer</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">status_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="n">WhackAMole</span><span class="o">.</span><span class="n">STATUS_BACKGROUND</span><span class="p">)</span>
        <span class="n">spacer</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

        <span class="n">start_button</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">status_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Start&quot;</span><span class="p">)</span>
        <span class="n">start_button</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">ipadx</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

        <span class="n">spacer</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">status_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="n">WhackAMole</span><span class="o">.</span><span class="n">STATUS_BACKGROUND</span><span class="p">)</span>
        <span class="n">spacer</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

        <span class="n">quit_button</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">status_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Quit&quot;</span><span class="p">)</span>
        <span class="n">quit_button</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">ipadx</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

        <span class="n">spacer</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">status_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="n">WhackAMole</span><span class="o">.</span><span class="n">STATUS_BACKGROUND</span><span class="p">)</span>
        <span class="n">spacer</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">hit_counter</span><span class="p">,</span> <span class="n">miss_counter</span><span class="p">,</span> <span class="n">start_button</span>

<span class="c1"># Create the GUI program</span>
<span class="n">program</span> <span class="o">=</span> <span class="n">WhackAMole</span><span class="p">()</span>

<span class="c1"># Start the GUI event loop</span>
<span class="n">program</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>
</pre></div>
</div>
<p>Step 4: Create a callback function for each event that will cause something
to happen in your program. Stub these functions out with a single print
statement in each one. Bind an event to each callback function. Now test
your program and make sure each event causes the correct print-line in
the Python console. (<a class="reference external" href="../_static/Programs/whack_a_mole_v4.py">whack_a_mole_v4.py</a>)</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">tkinter</span> <span class="kn">as</span> <span class="nn">tk</span>
<span class="kn">from</span> <span class="nn">tkinter</span> <span class="kn">import</span> <span class="n">PhotoImage</span>


<span class="k">class</span> <span class="nc">WhackAMole</span><span class="p">():</span>
    <span class="n">STATUS_BACKGROUND</span> <span class="o">=</span> <span class="s2">&quot;white&quot;</span>
    <span class="n">NUM_MOLES_ACROSS</span> <span class="o">=</span> <span class="mi">4</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">window</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Tk</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mole_frame</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">status_frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_frames</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mole_photo</span> <span class="o">=</span> <span class="n">PhotoImage</span><span class="p">(</span><span class="nb">file</span><span class="o">=</span><span class="s2">&quot;mole.png&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mole_buttons</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_moles</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">hit_counter</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">miss_counter</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_button</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">quit_button</span> \
            <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_status_widgets</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_callbacks</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">create_frames</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">mole_frame</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">)</span>
        <span class="n">mole_frame</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">status_frame</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="n">WhackAMole</span><span class="o">.</span><span class="n">STATUS_BACKGROUND</span><span class="p">)</span>
        <span class="n">status_frame</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">E</span> <span class="o">+</span> <span class="n">tk</span><span class="o">.</span><span class="n">W</span> <span class="o">+</span> <span class="n">tk</span><span class="o">.</span><span class="n">N</span> <span class="o">+</span> <span class="n">tk</span><span class="o">.</span><span class="n">S</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">mole_frame</span><span class="p">,</span> <span class="n">status_frame</span>

    <span class="k">def</span> <span class="nf">create_moles</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Source of mole image: https://play.google.com/store/apps/details?id=genergame.molehammer</span>

        <span class="n">mole_buttons</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">WhackAMole</span><span class="o">.</span><span class="n">NUM_MOLES_ACROSS</span><span class="p">):</span>
            <span class="n">row_of_buttons</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">WhackAMole</span><span class="o">.</span><span class="n">NUM_MOLES_ACROSS</span><span class="p">):</span>
                <span class="n">mole_button</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mole_frame</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">mole_photo</span><span class="p">)</span>
                <span class="n">mole_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="n">r</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="n">c</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>

                <span class="n">row_of_buttons</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mole_button</span><span class="p">)</span>

            <span class="n">mole_buttons</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row_of_buttons</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">mole_buttons</span>

    <span class="k">def</span> <span class="nf">create_status_widgets</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">spacer</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">status_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="n">WhackAMole</span><span class="o">.</span><span class="n">STATUS_BACKGROUND</span><span class="p">)</span>
        <span class="n">spacer</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

        <span class="n">hit_label</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">status_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Number of Hits&quot;</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="n">WhackAMole</span><span class="o">.</span><span class="n">STATUS_BACKGROUND</span><span class="p">)</span>
        <span class="n">hit_label</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

        <span class="n">hit_counter</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">status_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;0&quot;</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="n">WhackAMole</span><span class="o">.</span><span class="n">STATUS_BACKGROUND</span><span class="p">)</span>
        <span class="n">hit_counter</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

        <span class="n">spacer</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">status_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="n">WhackAMole</span><span class="o">.</span><span class="n">STATUS_BACKGROUND</span><span class="p">)</span>
        <span class="n">spacer</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

        <span class="n">miss_label</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">status_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Number of Misses&quot;</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="n">WhackAMole</span><span class="o">.</span><span class="n">STATUS_BACKGROUND</span><span class="p">)</span>
        <span class="n">miss_label</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

        <span class="n">miss_counter</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">status_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;0&quot;</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="n">WhackAMole</span><span class="o">.</span><span class="n">STATUS_BACKGROUND</span><span class="p">)</span>
        <span class="n">miss_counter</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

        <span class="n">spacer</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">status_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="n">WhackAMole</span><span class="o">.</span><span class="n">STATUS_BACKGROUND</span><span class="p">)</span>
        <span class="n">spacer</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

        <span class="n">start_button</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">status_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Start&quot;</span><span class="p">)</span>
        <span class="n">start_button</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">ipadx</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

        <span class="n">spacer</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">status_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="n">WhackAMole</span><span class="o">.</span><span class="n">STATUS_BACKGROUND</span><span class="p">)</span>
        <span class="n">spacer</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

        <span class="n">quit_button</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">status_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Quit&quot;</span><span class="p">)</span>
        <span class="n">quit_button</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">ipadx</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

        <span class="n">spacer</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">status_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="n">WhackAMole</span><span class="o">.</span><span class="n">STATUS_BACKGROUND</span><span class="p">)</span>
        <span class="n">spacer</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">hit_counter</span><span class="p">,</span> <span class="n">miss_counter</span><span class="p">,</span> <span class="n">start_button</span><span class="p">,</span> <span class="n">quit_button</span>

    <span class="k">def</span> <span class="nf">set_callbacks</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Set the same callback for each mole button</span>
        <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">WhackAMole</span><span class="o">.</span><span class="n">NUM_MOLES_ACROSS</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">WhackAMole</span><span class="o">.</span><span class="n">NUM_MOLES_ACROSS</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">mole_buttons</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;command&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mole_hit</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">start_button</span><span class="p">[</span><span class="s1">&#39;command&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">quit_button</span><span class="p">[</span><span class="s1">&#39;command&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">quit</span>

    <span class="k">def</span> <span class="nf">mole_hit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;mole button hit&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;start button hit&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">quit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;quit button hit&quot;</span><span class="p">)</span>

<span class="c1"># Create the GUI program</span>
<span class="n">program</span> <span class="o">=</span> <span class="n">WhackAMole</span><span class="p">()</span>

<span class="c1"># Start the GUI event loop</span>
<span class="n">program</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>
</pre></div>
</div>
<p>Step 5: Add appropriate functionality to the callback functions. This is
where the functional logic of your particular application resides. In the
case of our whack-a-mole game, we need to be able to count the number of
times a user clicks on a mole when it is visible. And we need the moles to
appear and disappear at random intervals. Originally each mole was a
button widget, but the border around each button was distracting, so
they were changed to label widgets. Two images were used to represent a mole:
one image is a solid color that matches the frame’s background, and the
other image is a picture of a mole. By replacing the image used for each
label we can make the moles visible or invisible. A label normally does
not have an associated callback, so we <code class="docutils literal"><span class="pre">bind</span></code> a left mouse click
event, <code class="docutils literal"><span class="pre">&quot;&lt;ButtonPress-1&gt;&quot;</span></code> to each label. We can determine whether
the mouse click is a “hit” or a “miss” by examining the label under the
click to see which image is currently set to the label. We use timer
events to change the image on each label.
Also notice the use of a messagebox to protect the program from accidental
quitting. The end result is shown below. (<a class="reference external" href="../_static/Programs/whack_a_mole_v5.py">whack_a_mole_v5.py</a>)</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">tkinter</span> <span class="kn">as</span> <span class="nn">tk</span>
<span class="kn">from</span> <span class="nn">tkinter</span> <span class="kn">import</span> <span class="n">PhotoImage</span>
<span class="kn">from</span> <span class="nn">tkinter</span> <span class="kn">import</span> <span class="n">messagebox</span>
<span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">randint</span>


<span class="k">class</span> <span class="nc">WhackAMole</span><span class="p">:</span>
    <span class="n">STATUS_BACKGROUND</span> <span class="o">=</span> <span class="s2">&quot;white&quot;</span>
    <span class="n">NUM_MOLES_ACROSS</span> <span class="o">=</span> <span class="mi">4</span>
    <span class="n">MIN_TIME_DOWN</span> <span class="o">=</span> <span class="mi">1000</span>
    <span class="n">MAX_TIME_DOWN</span> <span class="o">=</span> <span class="mi">5000</span>
    <span class="n">MIN_TIME_UP</span> <span class="o">=</span> <span class="mi">1000</span>
    <span class="n">MAX_TIME_UP</span> <span class="o">=</span> <span class="mi">3000</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">window</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Tk</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Whack-a-mole&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">mole_frame</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">status_frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_frames</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">mole_photo</span> <span class="o">=</span> <span class="n">PhotoImage</span><span class="p">(</span><span class="nb">file</span><span class="o">=</span><span class="s2">&quot;mole.png&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mole_cover_photo</span> <span class="o">=</span> <span class="n">PhotoImage</span><span class="p">(</span><span class="nb">file</span><span class="o">=</span><span class="s2">&quot;mole_cover.png&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_timers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">mole_labels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_moles</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">hit_counter</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">miss_counter</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_button</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">quit_button</span> \
            <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_status_widgets</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_callbacks</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">game_is_running</span> <span class="o">=</span> <span class="bp">False</span>

    <span class="k">def</span> <span class="nf">create_frames</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">mole_frame</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="p">)</span>
        <span class="n">mole_frame</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

        <span class="n">status_frame</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="n">WhackAMole</span><span class="o">.</span><span class="n">STATUS_BACKGROUND</span><span class="p">)</span>
        <span class="n">status_frame</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">E</span> <span class="o">+</span> <span class="n">tk</span><span class="o">.</span><span class="n">W</span> <span class="o">+</span> <span class="n">tk</span><span class="o">.</span><span class="n">N</span> <span class="o">+</span> <span class="n">tk</span><span class="o">.</span><span class="n">S</span><span class="p">,</span>
                          <span class="n">ipadx</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">mole_frame</span><span class="p">,</span> <span class="n">status_frame</span>

    <span class="k">def</span> <span class="nf">create_moles</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Source of mole image: https://play.google.com/store/apps/details?id=genergame.molehammer</span>

        <span class="n">mole_labels</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">WhackAMole</span><span class="o">.</span><span class="n">NUM_MOLES_ACROSS</span><span class="p">):</span>
            <span class="n">row_of_labels</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">WhackAMole</span><span class="o">.</span><span class="n">NUM_MOLES_ACROSS</span><span class="p">):</span>
                <span class="n">mole_label</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mole_frame</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">mole_photo</span><span class="p">)</span>
                <span class="n">mole_label</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="n">r</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="n">c</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">E</span> <span class="o">+</span> <span class="n">tk</span><span class="o">.</span><span class="n">W</span> <span class="o">+</span> <span class="n">tk</span><span class="o">.</span><span class="n">N</span> <span class="o">+</span> <span class="n">tk</span><span class="o">.</span><span class="n">S</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">label_timers</span><span class="p">[</span><span class="nb">id</span><span class="p">(</span><span class="n">mole_label</span><span class="p">)]</span> <span class="o">=</span> <span class="bp">None</span>

                <span class="n">row_of_labels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mole_label</span><span class="p">)</span>

            <span class="n">mole_labels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row_of_labels</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">mole_labels</span>

    <span class="k">def</span> <span class="nf">create_status_widgets</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">spacer</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">status_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                          <span class="n">bg</span><span class="o">=</span><span class="n">WhackAMole</span><span class="o">.</span><span class="n">STATUS_BACKGROUND</span><span class="p">)</span>
        <span class="n">spacer</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

        <span class="n">hit_label</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">status_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Number of Hits&quot;</span><span class="p">,</span>
                             <span class="n">bg</span><span class="o">=</span><span class="n">WhackAMole</span><span class="o">.</span><span class="n">STATUS_BACKGROUND</span><span class="p">)</span>
        <span class="n">hit_label</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

        <span class="n">hit_counter</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">status_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;0&quot;</span><span class="p">,</span>
                               <span class="n">bg</span><span class="o">=</span><span class="n">WhackAMole</span><span class="o">.</span><span class="n">STATUS_BACKGROUND</span><span class="p">)</span>
        <span class="n">hit_counter</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

        <span class="n">spacer</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">status_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                          <span class="n">bg</span><span class="o">=</span><span class="n">WhackAMole</span><span class="o">.</span><span class="n">STATUS_BACKGROUND</span><span class="p">)</span>
        <span class="n">spacer</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

        <span class="n">miss_label</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">status_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Number of Misses&quot;</span><span class="p">,</span>
                              <span class="n">bg</span><span class="o">=</span><span class="n">WhackAMole</span><span class="o">.</span><span class="n">STATUS_BACKGROUND</span><span class="p">)</span>
        <span class="n">miss_label</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

        <span class="n">miss_counter</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">status_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;0&quot;</span><span class="p">,</span>
                                <span class="n">bg</span><span class="o">=</span><span class="n">WhackAMole</span><span class="o">.</span><span class="n">STATUS_BACKGROUND</span><span class="p">)</span>
        <span class="n">miss_counter</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

        <span class="n">spacer</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">status_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                          <span class="n">bg</span><span class="o">=</span><span class="n">WhackAMole</span><span class="o">.</span><span class="n">STATUS_BACKGROUND</span><span class="p">)</span>
        <span class="n">spacer</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

        <span class="n">start_button</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">status_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Start&quot;</span><span class="p">)</span>
        <span class="n">start_button</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">ipadx</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

        <span class="n">spacer</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">status_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                          <span class="n">bg</span><span class="o">=</span><span class="n">WhackAMole</span><span class="o">.</span><span class="n">STATUS_BACKGROUND</span><span class="p">)</span>
        <span class="n">spacer</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

        <span class="n">quit_button</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">status_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Quit&quot;</span><span class="p">)</span>
        <span class="n">quit_button</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">ipadx</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

        <span class="n">spacer</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">status_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                          <span class="n">bg</span><span class="o">=</span><span class="n">WhackAMole</span><span class="o">.</span><span class="n">STATUS_BACKGROUND</span><span class="p">)</span>
        <span class="n">spacer</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">hit_counter</span><span class="p">,</span> <span class="n">miss_counter</span><span class="p">,</span> <span class="n">start_button</span><span class="p">,</span> <span class="n">quit_button</span>

    <span class="k">def</span> <span class="nf">set_callbacks</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Set the same callback for each mole label</span>
        <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">WhackAMole</span><span class="o">.</span><span class="n">NUM_MOLES_ACROSS</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">WhackAMole</span><span class="o">.</span><span class="n">NUM_MOLES_ACROSS</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">mole_labels</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="n">c</span><span class="p">]</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;&lt;ButtonPress-1&gt;&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mole_hit</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">start_button</span><span class="p">[</span><span class="s1">&#39;command&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">quit_button</span><span class="p">[</span><span class="s1">&#39;command&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">quit</span>

    <span class="k">def</span> <span class="nf">mole_hit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">game_is_running</span><span class="p">:</span>
            <span class="n">hit_label</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">widget</span>
            <span class="k">if</span> <span class="n">hit_label</span><span class="p">[</span><span class="s1">&#39;image&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">mole_cover_photo</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
                <span class="c1"># MISSED! Update the miss counter</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">miss_counter</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">miss_counter</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">])</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># HIT! Update the hit counter</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">hit_counter</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hit_counter</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">])</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
                <span class="c1"># Remove the mole and don&#39;t update the miss counter</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">put_down_mole</span><span class="p">(</span><span class="n">hit_label</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_button</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Start&#39;</span><span class="p">:</span>
            <span class="c1"># Change all the mole images to a blank image and</span>
            <span class="c1"># set a random time for the moles to re-appear on each label.</span>
            <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">WhackAMole</span><span class="o">.</span><span class="n">NUM_MOLES_ACROSS</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">WhackAMole</span><span class="o">.</span><span class="n">NUM_MOLES_ACROSS</span><span class="p">):</span>
                    <span class="n">the_label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mole_labels</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="n">c</span><span class="p">]</span>
                    <span class="n">the_label</span><span class="p">[</span><span class="s1">&#39;image&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mole_cover_photo</span>
                    <span class="n">time_down</span> <span class="o">=</span> <span class="n">randint</span><span class="p">(</span><span class="n">WhackAMole</span><span class="o">.</span><span class="n">MIN_TIME_DOWN</span><span class="p">,</span>
                                        <span class="n">WhackAMole</span><span class="o">.</span><span class="n">MAX_TIME_DOWN</span><span class="p">)</span>
                    <span class="n">timer_object</span> <span class="o">=</span> <span class="n">the_label</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="n">time_down</span><span class="p">,</span>
                                                   <span class="bp">self</span><span class="o">.</span><span class="n">pop_up_mole</span><span class="p">,</span> <span class="n">the_label</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">label_timers</span><span class="p">[</span><span class="nb">id</span><span class="p">(</span><span class="n">the_label</span><span class="p">)]</span> <span class="o">=</span> <span class="n">timer_object</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">game_is_running</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">start_button</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Stop&quot;</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">hit_counter</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;0&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">miss_counter</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;0&quot;</span>

        <span class="k">else</span><span class="p">:</span>  <span class="c1"># The game is running, so stop the game and reset everything</span>
            <span class="c1"># Show every mole and stop all the timers</span>
            <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">WhackAMole</span><span class="o">.</span><span class="n">NUM_MOLES_ACROSS</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">WhackAMole</span><span class="o">.</span><span class="n">NUM_MOLES_ACROSS</span><span class="p">):</span>
                    <span class="n">the_label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mole_labels</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="n">c</span><span class="p">]</span>
                    <span class="c1"># Show the mole</span>
                    <span class="n">the_label</span><span class="p">[</span><span class="s1">&#39;image&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mole_photo</span>
                    <span class="c1"># Delete any timer that is associated with the mole</span>
                    <span class="n">the_label</span><span class="o">.</span><span class="n">after_cancel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">label_timers</span><span class="p">[</span><span class="nb">id</span><span class="p">(</span><span class="n">the_label</span><span class="p">)])</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">game_is_running</span> <span class="o">=</span> <span class="bp">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">start_button</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Start&quot;</span>

    <span class="k">def</span> <span class="nf">put_down_mole</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">the_label</span><span class="p">,</span> <span class="n">timer_expired</span><span class="p">):</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">game_is_running</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">timer_expired</span><span class="p">:</span>
                <span class="c1"># The mole is going down before it was clicked on, so update the miss counter</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">miss_counter</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">miss_counter</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">])</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># The timer did not expire, so manually stop the timer</span>
                <span class="n">the_label</span><span class="o">.</span><span class="n">after_cancel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">label_timers</span><span class="p">[</span><span class="nb">id</span><span class="p">(</span><span class="n">the_label</span><span class="p">)])</span>

            <span class="c1"># Make the mole invisible</span>
            <span class="n">the_label</span><span class="p">[</span><span class="s1">&#39;image&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mole_cover_photo</span>

            <span class="c1"># Set a call to pop up the mole in the future</span>
            <span class="n">time_down</span> <span class="o">=</span> <span class="n">randint</span><span class="p">(</span><span class="n">WhackAMole</span><span class="o">.</span><span class="n">MIN_TIME_DOWN</span><span class="p">,</span>
                                <span class="n">WhackAMole</span><span class="o">.</span><span class="n">MAX_TIME_DOWN</span><span class="p">)</span>
            <span class="n">timer_object</span> <span class="o">=</span> <span class="n">the_label</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="n">time_down</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pop_up_mole</span><span class="p">,</span> <span class="n">the_label</span><span class="p">)</span>
            <span class="c1"># Remember the timer object so it can be canceled later, if need be</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">label_timers</span><span class="p">[</span><span class="nb">id</span><span class="p">(</span><span class="n">the_label</span><span class="p">)]</span> <span class="o">=</span> <span class="n">timer_object</span>

    <span class="k">def</span> <span class="nf">pop_up_mole</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">the_label</span><span class="p">):</span>
        <span class="c1"># Show the mole on the screen</span>
        <span class="n">the_label</span><span class="p">[</span><span class="s1">&#39;image&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mole_photo</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">game_is_running</span><span class="p">:</span>
            <span class="c1"># Set a call to make the mole disappear in the future</span>
            <span class="n">time_up</span> <span class="o">=</span> <span class="n">randint</span><span class="p">(</span><span class="n">WhackAMole</span><span class="o">.</span><span class="n">MIN_TIME_UP</span><span class="p">,</span> <span class="n">WhackAMole</span><span class="o">.</span><span class="n">MAX_TIME_UP</span><span class="p">)</span>
            <span class="n">timer_object</span> <span class="o">=</span> <span class="n">the_label</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="n">time_up</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">put_down_mole</span><span class="p">,</span>
                                           <span class="n">the_label</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">label_timers</span><span class="p">[</span><span class="nb">id</span><span class="p">(</span><span class="n">the_label</span><span class="p">)]</span> <span class="o">=</span> <span class="n">timer_object</span>

    <span class="k">def</span> <span class="nf">quit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">really_quit</span> <span class="o">=</span> <span class="n">messagebox</span><span class="o">.</span><span class="n">askyesno</span><span class="p">(</span><span class="s2">&quot;Quiting?&quot;</span><span class="p">,</span> <span class="s2">&quot;Do you really want to quit?&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">really_quit</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span>

<span class="c1"># Create the GUI program</span>
<span class="n">program</span> <span class="o">=</span> <span class="n">WhackAMole</span><span class="p">()</span>

<span class="c1"># Start the GUI event loop</span>
<span class="n">program</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>We developed a complete GUI application in 5 well-designed stages. Hopefully
you see the value in incremental software development.</p>
<p>However, the end result is not necessarily easy to understand or modify for
future enhancements. The next lesson will introduce a scheme for breaking
complete software into more managable pieces.</p>
</div>
</div>


  
      


<script type="text/javascript">

  $('#relations-prev').tooltip({'placement':'right', 'selector': '', 'delay': { show: 100, hide: 50}});
  $('#relations-next').tooltip({'placement':'left', 'selector': '', 'delay': { show: 100, hide: 50}});
  
</script>
  
</div>
<p style="line-height: 2em">&nbsp;</p>

  </body>
</html>